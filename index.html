<!DOCTYPE html>
<!-- Adicionado 'dark' como classe padrão inicial, JS vai gerenciar -->
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub Netzeroth</title> <!-- Título inicial -->
    <!-- Script do Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Configuração inicial do Tailwind para modo escuro ser padrão
        tailwind.config = {
          darkMode: 'class', // Habilita o modo escuro baseado em classe
          theme: {
            extend: {
              // Você pode adicionar cores customizadas aqui se precisar
            }
          }
        }
      </script>
    <style>
        /* Estilos básicos para o Hub + Variáveis de Tema */
        :root {
            --hub-bg: #f7f7fb; /* Light mode background */
            --hub-text: #111827; /* Light mode text */
            --hub-header-bg: #ffffff; /* Light mode header */
            --hub-border: #e5e7eb; /* Light mode border */
            --hub-card-bg: #ffffff; /* Light mode card */
            --hub-muted-text: #6b7280; /* Light mode muted text */
            --hub-accent-hover: #eef2ff; /* Light mode hover */
            --hub-button-bg: #e5e7eb; /* Light mode nav button */
            --hub-button-text: #374151; /* Light mode nav button text */
            --hub-dropdown-bg: #ffffff;
            --hub-dropdown-hover: #f3f4f6;
            --hub-dropdown-text: #374151;
            --hub-home-button-bg: #ffffff;
            --hub-home-button-border: #e5e7eb;
            --hub-home-button-hover-border: #6366f1; /* Indigo */
            --hub-home-button-hover-text: #4f46e5; /* Indigo */
        }

        .dark:root {
            --hub-bg: #0b0e14; /* Dark mode background */
            --hub-text: #eaeefb; /* Dark mode text */
            --hub-header-bg: #111623; /* Dark mode header */
            --hub-border: #22283a; /* Dark mode border */
            --hub-card-bg: #111623; /* Dark mode card */
            --hub-muted-text: #8992a4; /* Dark mode muted text */
            --hub-accent-hover: #1f2937; /* Dark mode hover */
            --hub-button-bg: #22283a; /* Dark mode nav button */
            --hub-button-text: #eaeefb; /* Dark mode nav button text */
            --hub-dropdown-bg: #111623;
            --hub-dropdown-hover: #22283a;
            --hub-dropdown-text: #eaeefb;
            --hub-home-button-bg: #111623;
            --hub-home-button-border: #22283a;
            --hub-home-button-hover-border: #6ea8fe; /* Light blue */
            --hub-home-button-hover-text: #9bdbff; /* Lighter blue */
        }


        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
        }
        body {
            background-color: var(--hub-bg);
            color: var(--hub-text);
            font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s, color 0.3s; /* Smooth theme transition */
        }
        .app-iframe {
            display: none;
            flex-grow: 1;
            border: none;
            width: 100%;
            height: 100%;
        }
        .app-iframe.active {
            display: block;
        }
        #page-container {
             flex-grow: 1;
             overflow: hidden;
             position: relative;
        }

        #page-home {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            display: none;
            background-color: var(--hub-bg); /* Use theme variable */
            transition: background-color 0.3s;
        }
         #page-home.active {
            display: flex;
         }

        /* Header Styles using variables */
        .hub-header {
             background-color: color-mix(in srgb, var(--hub-header-bg) 80%, transparent); /* Semi-transparent */
             border-bottom: 1px solid var(--hub-border);
             backdrop-filter: blur(8px);
             transition: background-color 0.3s, border-color 0.3s;
        }
        .hub-title {
             color: var(--hub-text);
             font-weight: bold;
             font-size: 1.25rem; /* text-xl */
             cursor: pointer; /* Make title look clickable */
             transition: color 0.3s;
        }

        /* Nav Button and Dropdown using variables */
        #nav-button {
            background-color: var(--hub-button-bg);
            color: var(--hub-button-text);
            transition: background-color 0.3s, color 0.3s;
        }
        /* Tailwind handles hover for nav button, no need to override unless necessary */

        .dropdown-menu {
             background-color: var(--hub-dropdown-bg);
             border: 1px solid var(--hub-border);
             transition: background-color 0.3s, border-color 0.3s;
        }
        .nav-link {
            color: var(--hub-dropdown-text) !important;
            transition: background-color 0.2s, color 0.2s;
         }
        .nav-link:hover {
             background-color: var(--hub-dropdown-hover) !important;
        }

        /* Home Buttons using variables */
        .home-button {
            background-color: var(--hub-home-button-bg);
            border: 1px solid var(--hub-home-button-border);
            border-radius: 1.5rem; /* rounded-2xl */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-lg */
            transition: all 0.3s;
        }
        .home-button:hover {
             border-color: var(--hub-home-button-hover-border);
             transform: translateY(-4px); /* hover:-translate-y-1 */
        }
        .home-button h2 {
            color: var(--hub-text); /* Use main text color */
            transition: color 0.3s;
            font-weight: 600; /* font-semibold */
        }
        .home-button p {
             color: var(--hub-muted-text); /* Use muted text color */
             transition: color 0.3s;
             font-size: 0.875rem; /* text-sm */
        }
        .home-button:hover h2 {
             color: var(--hub-home-button-hover-text); /* Use hover text color */
        }
         .home-button span { /* Ícones */
             margin-bottom: 1rem; /* mb-4 */
             font-size: 3rem; /* text-5xl is approx 3rem */
         }

         /* Theme Toggle Button */
         #theme-toggle-button {
             background-color: var(--hub-button-bg);
             color: var(--hub-button-text);
             border: 1px solid var(--hub-border);
             padding: 0.5rem; /* p-2 */
             border-radius: 9999px; /* rounded-full */
             transition: all 0.3s;
         }
         #theme-toggle-button:hover {
             opacity: 0.8;
         }

         /* Removido o estilo .soon-badge */

    </style>
</head>
<body class="min-h-screen">

    <!-- HEADER GLOBAL - O Menu de Navegação -->
    <header class="sticky top-0 z-50 w-full hub-header flex-shrink-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Título do Hub (Clicável) -->
                <div class="flex-shrink-0 flex items-center">
                    <!-- Link adicionado ao redor do span -->
                    <a href="#" id="home-link" class="hub-title">
                        A LENDA DE NETZEROTH
                    </a>
                </div>

                <div class="flex items-center gap-4"> <!-- Container para botões -->
                    <!-- Botão de Tema -->
                    <button id="theme-toggle-button" title="Mudar tema">
                        <svg id="theme-icon-light" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm-.707 7.072l.707-.707a1 1 0 10-1.414-1.414l-.707.707a1 1 0 001.414 1.414zM3 11a1 1 0 100-2H2a1 1 0 100 2h1z"></path></svg>
                        <svg id="theme-icon-dark" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                    </button>

                    <!-- Menu Dropdown de Navegação -->
                    <div class="relative dropdown">
                        <button id="nav-button" class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[var(--hub-header-bg)] focus:ring-blue-500 transition">
                            <span id="nav-button-text">Home</span>
                            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                            </svg>
                        </button>

                        <div class="dropdown-menu hidden absolute right-0 mt-2 w-56 origin-top-right rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none">
                            <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="nav-button">
                                <a href="#" class="nav-link block px-4 py-2 text-sm" role="menuitem" data-page="page-home">
                                    Home
                                </a>
                                <a href="#" class="nav-link block px-4 py-2 text-sm" role="menuitem" data-page="page-ficha">
                                    Ficha de Personagem
                                </a>
                                <a href="#" class="nav-link block px-4 py-2 text-sm" role="menuitem" data-page="page-mestre">
                                    Ferramentas do Mestre
                                </a>
                                <a href="#" class="nav-link block px-4 py-2 text-sm" role="menuitem" data-page="page-manual">
                                    Manual de Instruções
                                </a>
                                <!-- Novo Link -->
                                <a href="#" class="nav-link block px-4 py-2 text-sm" role="menuitem" data-page="page-historia">
                                    História de Netzeroth <span class="text-xs opacity-70">(Em breve)</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div> <!-- Fim do container de botões -->
            </div>
        </div>
    </header>

    <!-- CONTAINER PRINCIPAL DAS PÁGINAS -->
    <main id="page-container">

        <!-- PÁGINA HOME -->
        <div id="page-home" class="active">
            <div class="flex flex-col items-center justify-center w-full p-6 text-center m-auto">
                <!-- Título e Subtítulo da Home -->
                 <h1 class="text-4xl font-bold mb-4">
                    Bem vindo à Netzeroth, Portador do Selo!
                </h1>
                <p class="text-xl text-[var(--hub-muted-text)] mb-12">
                    Por onde você começará sua aventura hoje?
                </p>
                <!-- Botões Grandes da Home - Atualizado para 4 colunas em telas grandes -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl"> <!-- Ajustado max-w e gap -->
                    <button data-page="page-ficha" class="nav-link-btn home-button group flex flex-col items-center p-8">
                        <span>📜</span>
                        <h2 class="text-xl mb-2">Ficha de Personagem</h2>
                        <p class="text-sm">Acesse e edite sua lenda.</p>
                    </button>
                    <button data-page="page-mestre" class="nav-link-btn home-button group flex flex-col items-center p-8">
                        <span>🎲</span>
                        <h2 class="text-xl mb-2">Ferramentas do Mestre</h2>
                        <p class="text-sm">Gerencie sua campanha.</p>
                    </button>
                    <button data-page="page-manual" class="nav-link-btn home-button group flex flex-col items-center p-8">
                        <span>📖</span>
                        <h2 class="text-xl mb-2">Manual de Instruções</h2>
                        <p class="text-sm">Consulte as regras e a lore.</p>
                    </button>
                    <!-- Novo Botão com ícone atualizado -->
                    <button data-page="page-historia" class="nav-link-btn home-button group flex flex-col items-center p-8">
                        <span>🌳</span> <!-- Ícone atualizado para árvore -->
                        <h2 class="text-xl mb-2">História de Netzeroth</h2>
                        <!-- "(Em breve)" movido para dentro do <p> -->
                        <p class="text-sm">Explore contos e lendas. (Em breve)</p>
                        <!-- Removido o span .soon-badge -->
                    </button>
                </div>
            </div>
        </div>

        <!-- IFRAMES -->
        <iframe id="page-ficha" class="app-iframe" title="Ficha de Personagem" src="about:blank"></iframe>
        <iframe id="page-mestre" class="app-iframe" title="Ferramentas do Mestre" src="about:blank"></iframe>
        <iframe id="page-manual" class="app-iframe" title="Manual de Instruções" src="about:blank"></iframe>
        <!-- Novo Iframe -->
        <iframe id="page-historia" class="app-iframe" title="História de Netzeroth" src="about:blank"></iframe>

    </main>

    <!-- SCRIPT DO "HUB" (Navegação + Lógica de Tema) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navButton = document.getElementById('nav-button');
            const navButtonText = document.getElementById('nav-button-text');
            const dropdown = navButton.closest('.dropdown');
            const dropdownMenu = dropdown.querySelector('.dropdown-menu');
            const pageContainer = document.getElementById('page-container');
            const allPages = pageContainer.querySelectorAll(':scope > iframe, :scope > #page-home');
            const navLinks = document.querySelectorAll('.nav-link, .nav-link-btn');
            const homeLink = document.getElementById('home-link'); // Link do título
            const themeToggleButton = document.getElementById('theme-toggle-button');
            const themeIconLight = document.getElementById('theme-icon-light');
            const themeIconDark = document.getElementById('theme-icon-dark');
            let hideTimeout;

            // Adicionado page-historia e seu futuro arquivo
            const pageFiles = {
                'page-ficha': './ficha.html',
                'page-mestre': './mestre.html',
                'page-manual': './manual.html',
                'page-historia': './historia.html' // Nome do seu futuro arquivo
            };

            // --- Lógica de Tema ---
            function applyTheme(isDark) {
                if (isDark) {
                    document.documentElement.classList.add('dark');
                    themeIconLight.classList.remove('hidden'); // Show sun icon
                    themeIconDark.classList.add('hidden');    // Hide moon icon
                } else {
                    document.documentElement.classList.remove('dark');
                    themeIconLight.classList.add('hidden');     // Hide sun icon
                    themeIconDark.classList.remove('hidden');  // Show moon icon
                }
            }

            function toggleTheme() {
                const isDark = document.documentElement.classList.contains('dark');
                applyTheme(!isDark);
                // Salva a preferência
                localStorage.setItem('theme', !isDark ? 'dark' : 'light');
            }

            // Aplica o tema salvo ao carregar
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            // Prioriza o salvo, depois a preferência do sistema, default é dark
            applyTheme(savedTheme === 'dark' || (savedTheme === null && prefersDark) || savedTheme === null);

            themeToggleButton.addEventListener('click', toggleTheme);

            // --- Lógica de Navegação ---
            function showPage(pageId) {
                allPages.forEach(page => page.classList.remove('active'));

                const activePage = document.getElementById(pageId);
                let pageTitle = 'A Lenda de Netzeroth'; // Título base atualizado

                if (activePage) {
                    // Carrega o iframe apenas na primeira vez que é clicado
                    if (activePage.tagName === 'IFRAME' && activePage.getAttribute('src') === 'about:blank') {
                        const filePath = pageFiles[pageId];
                        if (filePath) {
                            activePage.setAttribute('src', filePath);
                        } else {
                            // Se for a página de história e o arquivo ainda não existe, podemos deixar em branco ou mostrar uma mensagem
                            if (pageId === 'page-historia') {
                                // Opcional: injetar HTML de "Em breve" no iframe
                                // activePage.contentWindow.document.body.innerHTML = '<div style="padding: 2rem; text-align: center; color: var(--hub-muted-text);"><h1>Em breve...</h1><p>Esta seção está em desenvolvimento.</p></div>';
                                console.warn(`File path for ${pageId} not defined, likely 'historia.html' does not exist yet.`);
                            } else {
                                console.error(`File path not defined for page ID: ${pageId}`);
                            }
                        }
                    }

                    activePage.classList.add('active');

                    // Atualiza o texto do botão de navegação e o título da aba
                    const link = document.querySelector(`.nav-link[data-page="${pageId}"]`) || document.querySelector(`.nav-link-btn[data-page="${pageId}"]`);
                    let buttonText = 'Home';
                    if (link) {
                         const h2 = link.querySelector('h2');
                         // Pega o texto principal, ignorando o span "Em breve" se existir
                         buttonText = h2 ? h2.textContent.trim() : (link.firstChild.textContent.trim() || link.textContent.trim());
                         // Remove o "(Em breve)" do título da página, se existir
                         buttonText = buttonText.replace(/\s*\(Em breve\)\s*$/, '');
                         pageTitle = `Netzeroth - ${buttonText}`;
                    } else if (pageId === 'page-home') {
                        buttonText = 'Home';
                        pageTitle = 'A Lenda de Netzeroth - Home';
                    }
                    navButtonText.textContent = buttonText;
                    document.title = pageTitle;
                } else {
                     document.title = pageTitle; // Volta ao título base se a página não for encontrada
                     console.error(`Page element not found for ID: ${pageId}`);
                }

                // Fecha o dropdown e cancela qualquer timeout de fechamento
                dropdownMenu.classList.add('hidden');
                clearTimeout(hideTimeout);
            }

             // --- Event Listeners ---
             navButton.addEventListener('click', (e) => {
                 e.stopPropagation();
                 dropdownMenu.classList.toggle('hidden');
             });

             dropdown.addEventListener('mouseleave', () => {
                 hideTimeout = setTimeout(() => {
                     dropdownMenu.classList.add('hidden');
                 }, 300);
             });

             dropdown.addEventListener('mouseenter', () => {
                 clearTimeout(hideTimeout);
             });

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.getAttribute('data-page');
                    showPage(pageId);
                    window.scrollTo(0, 0); // Rola para o topo ao trocar de página
                });
            });

             // Evento para o link do título principal
             homeLink.addEventListener('click', (e) => {
                 e.preventDefault();
                 showPage('page-home');
                 window.scrollTo(0, 0);
             });

             // Fecha dropdown ao clicar fora
             document.body.addEventListener('click', (e) => {
                 if (!dropdown.contains(e.target)) {
                     dropdownMenu.classList.add('hidden');
                     clearTimeout(hideTimeout);
                 }
             });

            // Inicializa na Home
            showPage('page-home');
        });
    </script>

</body>
</html>

